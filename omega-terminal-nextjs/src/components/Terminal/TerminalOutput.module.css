/**
 * @file TerminalOutput.module.css
 * @description Rich terminal output styling with theme-aware line types and responsive behavior.
 * @sources styles/base.css, styles/themes.css, styles/futuristic-theme.css, styles/mobile-terminal-fix.css
 */

/* -----------------------------------------------------------------------------
   Container & Scroll Behavior
   ----------------------------------------------------------------------------- */

.container {
  flex: 1 1 auto;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 24px;
  margin-bottom: 0;
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  font-family: "Courier New", monospace;
  font-size: 13px;
  line-height: 1.8;
  min-height: 0;
  max-height: 100%;
  word-wrap: break-word;
  word-break: break-word;
  scrollbar-width: thin;
  scrollbar-color: #00d4ff rgba(0, 0, 0, 0.2);
}

.container::-webkit-scrollbar {
  width: 8px;
}

.container::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.container::-webkit-scrollbar-thumb {
  background: #00d4ff;
  border-radius: 4px;
  transition: background 0.2s ease;
}

.container::-webkit-scrollbar-thumb:hover {
  background: #00ffff;
}

/* Light mode scrollbar */
:global(body.light-mode) .container::-webkit-scrollbar-thumb {
  background: var(--cyber-blue, #0051d5);
}

:global(body.light-mode) .container::-webkit-scrollbar-thumb:hover {
  background: var(--cyber-blue-bright, #0040dd);
}

/* -----------------------------------------------------------------------------
   Line Types & Structure
   ----------------------------------------------------------------------------- */

.line {
  margin-bottom: 5px;
  word-wrap: break-word;
}

.prompt {
  color: #ffffff;
  font-weight: bold;
}

.command {
  color: #ffffff;
}

.output {
  color: #cccccc;
  margin-left: 20px;
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

.error {
  color: #ff6666;
}

.success {
  color: #ffffff;
}

.warning {
  color: #ffffcc;
}

.info {
  color: #99ccff;
}

.html {
  color: #ffffff;
}

.lineTimestamp {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.35);
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

.copyable {
  position: relative;
  cursor: pointer;
  color: rgba(0, 188, 242, 0.98);
  text-decoration: underline;
  text-decoration-style: dotted;
}

.copyable:hover {
  color: rgba(0, 255, 216, 0.95);
}

.lineHtml :global(code),
.lineHtml :global(pre) {
  font-family: "Fira Code", "Courier New", monospace;
  font-size: 13px;
  background: rgba(0, 8, 18, 0.6);
  border: 1px solid rgba(0, 188, 242, 0.2);
  border-radius: 10px;
  padding: 12px;
  display: block;
  overflow-x: auto;
  white-space: pre;
}

.codeBlock {
  font-family: "Fira Code", "Courier New", monospace;
  font-size: 13px;
  line-height: 1.6;
  background: rgba(8, 12, 22, 0.85);
  border-radius: 12px;
  border: 1px solid rgba(0, 188, 242, 0.25);
  padding: 16px;
  overflow-x: auto;
}

.preformatted {
  font-family: inherit;
  white-space: pre-wrap;
  word-wrap: break-word;
  background: rgba(0, 8, 18, 0.45);
  border-radius: 8px;
  padding: 8px 12px;
}

.table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0;
  font-size: 13px;
  background: rgba(0, 8, 18, 0.6);
  border-radius: 12px;
  overflow: hidden;
}

.tableRow {
  border-bottom: 1px solid rgba(0, 188, 242, 0.18);
}

.tableRow:hover {
  background: rgba(0, 188, 242, 0.08);
}

.tableCell {
  padding: 12px 16px;
  text-align: left;
  color: rgba(220, 225, 235, 0.85);
}

.tableHeader {
  font-weight: 700;
  color: rgba(0, 188, 242, 0.95);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.outputMobile {
  width: 100%;
  max-width: 100%;
}

.compactMode {
  padding: 12px !important;
  margin-bottom: 12px !important;
}

/* -----------------------------------------------------------------------------
   Theme Variants (global body selectors)
   ----------------------------------------------------------------------------- */

:global(body.theme-executive) .container {
  background: rgba(12, 12, 18, 0.86);
  border: 1px solid rgba(255, 215, 0, 0.28);
  color: rgba(245, 238, 220, 0.88);
  box-shadow: inset 0 0 0 1px rgba(255, 215, 0, 0.15),
    0 25px 55px rgba(255, 215, 0, 0.2);
}

:global(body.theme-executive) .info,
:global(body.theme-executive) .success {
  border-left-color: rgba(255, 215, 0, 0.6);
  color: rgba(255, 215, 0, 0.95);
}

:global(body.theme-modern) .container {
  background: linear-gradient(
    180deg,
    rgba(18, 20, 36, 0.9) 0%,
    rgba(10, 12, 22, 0.9) 100%
  );
  border: 1px solid rgba(98, 0, 255, 0.35);
  color: rgba(220, 220, 245, 0.92);
  box-shadow: 0 22px 48px rgba(98, 0, 255, 0.18);
}

:global(body.theme-modern) .error {
  border-left-color: rgba(255, 120, 220, 0.75);
  color: rgba(255, 145, 235, 0.95);
}

:global(body.theme-matrix) .container {
  background: rgba(0, 6, 0, 0.9);
  border: 1px solid rgba(57, 255, 20, 0.28);
  color: rgba(57, 255, 20, 0.9);
}

:global(body.theme-matrix) .prompt,
:global(body.theme-matrix) .command,
:global(body.theme-matrix) .output {
  color: rgba(57, 255, 20, 0.95);
}

:global(body.theme-retro) .container {
  background: rgba(24, 18, 0, 0.92);
  border: 1px solid rgba(255, 170, 0, 0.35);
  color: rgba(255, 218, 170, 0.9);
}

:global(body.theme-powershell) .container {
  background: rgba(1, 36, 86, 0.9);
  border: 1px solid rgba(0, 188, 242, 0.35);
  color: rgba(220, 235, 255, 0.9);
}

:global(body.basic-terminal-mode) .container {
  background: rgba(0, 0, 0, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.15);
}

:global(body.light-mode) .container {
  background: rgba(248, 250, 255, 0.95);
  border: 1px solid rgba(0, 81, 213, 0.2);
  color: rgba(18, 22, 38, 0.92);
}

:global(body.light-mode) .prompt {
  color: var(--cyber-blue, #0051d5);
}

:global(body.light-mode) .output {
  color: rgba(18, 22, 38, 0.78);
}

:global(body.light-mode) .error {
  border-left-color: rgba(215, 60, 60, 0.7);
}

:global(body.modern-ui-futuristic) .container {
  background: var(--modern-bg-primary, rgba(8, 14, 32, 0.88));
  border: 1px solid var(--modern-border, rgba(0, 255, 210, 0.3));
  color: var(--modern-text-primary, rgba(245, 250, 255, 0.95));
  box-shadow: 0 28px 60px rgba(0, 255, 210, 0.18);
}

:global(body.modern-ui-futuristic) .line {
  margin-bottom: var(--modern-spacing-sm, 10px);
}

:global(body.modern-ui-futuristic) .prompt {
  color: var(--modern-primary, #00ffd2);
  text-shadow: 0 0 10px rgba(0, 255, 210, 0.35);
}

:global(body.modern-ui-futuristic) .success {
  color: var(--modern-success, #34c759);
  background: rgba(52, 199, 89, 0.12);
  border-left-color: var(--modern-success, #34c759);
}

:global(body.modern-ui-futuristic) .error {
  color: var(--modern-error, #ff3b30);
  background: rgba(255, 59, 48, 0.12);
  border-left-color: var(--modern-error, #ff3b30);
}

:global(body.modern-ui-futuristic) .warning {
  color: var(--modern-warning, #ff9500);
  background: rgba(255, 149, 0, 0.12);
  border-left-color: var(--modern-warning, #ff9500);
}

:global(body.modern-ui-futuristic) .info {
  color: var(--modern-info, #5ac8fa);
  background: rgba(90, 200, 250, 0.12);
  border-left-color: var(--modern-info, #5ac8fa);
}

/* -----------------------------------------------------------------------------
   Responsive Breakpoints
   ----------------------------------------------------------------------------- */

@media (max-width: 1400px) {
  .container {
    padding: 16px;
    font-size: 13.5px;
  }

  .tableCell {
    padding: 10px 14px;
  }
}

@media (max-width: 1024px) {
  .container {
    padding: 14px;
  }

  .line {
    gap: 8px;
  }

  .codeBlock {
    font-size: 12.5px;
  }
}

@media (max-width: 768px) {
  .container {
    width: 100vw;
    max-width: 100vw;
    margin: 0;
    padding: 12px 14px;
    border-radius: 16px;
    font-size: 13px;
    max-height: calc(100vh - 120px);
    overflow-x: hidden;
    background: rgba(0, 0, 0, 0.85);
  }

  .line,
  .error,
  .success,
  .warning,
  .info,
  .html {
    display: block;
    width: 100%;
    max-width: 100%;
    word-wrap: break-word;
    white-space: pre-wrap;
    writing-mode: horizontal-tb;
    text-orientation: mixed;
    direction: ltr;
  }

  .prompt {
    display: inline;
    margin-right: 6px;
  }

  .command,
  .output,
  .error,
  .success,
  .warning,
  .info {
    margin-left: 0;
    display: inline;
  }

  .codeBlock,
  .preformatted {
    padding: 12px;
    font-size: 12px;
  }

  .table {
    display: block;
    width: 100%;
    overflow-x: auto;
  }

  .tableCell,
  .tableHeader {
    white-space: nowrap;
  }

  .outputMobile {
    font-size: 12.5px;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 10px 12px;
    font-size: 12.5px;
    border-radius: 14px;
  }

  .line {
    margin-bottom: 5px;
  }

  .prompt {
    font-size: 12px;
  }

  .copyable {
    display: inline-block;
  }

  .headerBadge,
  .lineTimestamp {
    font-size: 9px;
  }
}

@media (max-height: 600px) and (orientation: landscape) {
  .container {
    max-height: calc(100vh - 80px);
    font-size: 12px;
    padding: 10px 12px;
  }
}

/* -----------------------------------------------------------------------------
   Feature Queries & Touch Enhancements
   ----------------------------------------------------------------------------- */

@supports (-webkit-touch-callout: none) {
  .container {
    max-height: calc(-webkit-fill-available - 120px);
    -webkit-font-smoothing: antialiased;
  }
}

@supports (padding: max(0px)) {
  .container {
    padding-bottom: max(16px, calc(16px + env(safe-area-inset-bottom)));
  }
}

@media (hover: none) and (pointer: coarse) {
  .copyable {
    min-height: 44px;
  }
}

.lineMobile {
  display: none;
}

@media (max-width: 768px) {
  .lineMobile {
    display: block;
  }
}

.noGlow {
  box-shadow: none !important;
}
